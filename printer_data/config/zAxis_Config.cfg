# This file contains common pin mappings for the BIGTREETECH SKR V1.4
# board. To use this config, the firmware should be compiled for the
# LPC1768 or LPC1769(Turbo).

# See docs/Config_Reference.md for a description of parameters.

[stepper_x]
step_pin: P2.2
dir_pin: !P2.6
enable_pin: !P2.1
endstop_pin: !P1.29
microsteps: 16
rotation_distance: 40.55
position_endstop: 0
position_min: 0
position_max: 287
homing_speed: 50
second_homing_speed: 8

[tmc2209 stepper_x]
uart_pin: P1.10
run_current: .9
hold_current: 0.5
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 500

[stepper_y]
step_pin: zmcu:PA3
dir_pin: zmcu:PA2
enable_pin: !zmcu:PA5
endstop_pin: !zmcu:PB13
microsteps: 16
rotation_distance: 36.56
position_endstop: 0
position_min: 0
position_max: 350
homing_speed: 50
second_homing_speed: 8
position_endstop: 350

[tmc2209 stepper_y]
uart_pin: zmcu:PA4
run_current: 1.
hold_current: 0.750
interpolate: False
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 500

[stepper_y1]
step_pin: zmcu:PB1
dir_pin: !zmcu:PB0
enable_pin: !zmcu:PB11
endstop_pin: !zmcu:PB13
microsteps: 16
rotation_distance: 36.56
#position_endstop: 0
#position_min: 0
#position_max: 280
#homing_speed: 50
#second_homing_speed: 8
#position_endstop: 280


#  Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_y1]
uart_pin: zmcu:PB10
run_current: 1.
hold_current: 0.750
interpolate: False
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 500

#####################################################################
# Z Stepper Settings
#####################################################################

[stepper_z]
step_pin: P0.22
dir_pin: P2.11
enable_pin: !P0.21
endstop_pin:  probe:z_virtual_endstop
microsteps: 16
rotation_distance: 3.015
#position_endstop: 0
position_min: -6.0
position_max: 260
homing_speed: 4
homing_retract_speed: 1
homing_retract_dist: 2
second_homing_speed: 0.5

[tmc2209 stepper_z]
uart_pin: P1.8
run_current: 1
hold_current: 0.5
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 500


[stepper_z1]
step_pin: P2.13
dir_pin: !P0.11
enable_pin: !P2.12
endstop_pin:  probe:z_virtual_endstop
microsteps: 32
rotation_distance: 8





[tmc2209 stepper_z1]
uart_pin: P1.4
run_current: 0.700
hold_current: 0.500
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 5000


##  Z2 Stepper - Front Right
##  Connected to MOTOR_4
[stepper_z2]
step_pin: P1.15
dir_pin: P1.14
enable_pin: !P1.16
endstop_pin:  probe:z_virtual_endstop
microsteps: 32
rotation_distance: 8


[tmc2209 stepper_z2]
uart_pin: P1.1
run_current: 1
hold_current: 0.5
# https://github.com/KevinOConnor/klipper/issues/1363
stealthchop_threshold: 5000


# https://github.com/KevinOConnor/klipper/blob/master/docs/Endstop_Phase.md
#[endstop_phase stepper_z]
#trigger_phase:29/64